<!doctype html>
<html lang="it" data-theme="light">
<head>
  <meta charset="utf-8">
  <title>MusiMatch â€“ Impostazioni</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <script>
    (function() {
      const KEY = 'musimatch-theme';
      let theme = 'light';
      try {
        const stored = localStorage.getItem(KEY);
        if (stored === 'dark' || stored === 'light') theme = stored;
      } catch (e) {}
      document.documentElement.setAttribute('data-theme', theme);
    })();
  </script>
  <script>
    (function() {
      const KEY = 'musimatch-nav-state';
      try {
        const state = sessionStorage.getItem(KEY) || localStorage.getItem(KEY);
        if (state === 'logged-in' || state === 'logged-out') {
          document.documentElement.setAttribute('data-nav-state', state);
        } else {
          document.documentElement.setAttribute('data-nav-state', 'pending');
        }
      } catch (e) {
        document.documentElement.setAttribute('data-nav-state', 'pending');
      }
    })();
  </script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="css/main.css">
  <link rel="stylesheet" href="css/ui.css">
</head>
<body>
  <header class="page-header">
    <div class="logo-link">
      <a href="home.html" class="logo-img">
        <img src="assets/img/logo.svg" alt="MusiMatch">
      </a>
      <div>
        <p class="eyebrow" style="margin: 0;">MusiMatch</p>
        <h1 style="margin: 0;">Impostazioni account</h1>
        <p style="margin: 0;">Gestisci email, password e dati del tuo account.</p>
      </div>
    </div>
  </header>

  <main class="page-content">
    <section class="card">
      <h2>Foto profilo</h2>
            <div class="avatar-settings">
              <div class="profile-avatar small" id="settings-avatar">
                <div class="avatar-fallback">ðŸ‘¤</div>
              </div>
              <div class="avatar-actions">
                <div class="avatar-buttons">
                  <label class="ghost ghost-success btn-block btn-compact" style="justify-content: center;">
                    Carica immagine
                    <input type="file" id="settings-avatar-file" accept="image/*" style="display:none;">
                  </label>
                  <button type="button" class="ghost ghost-danger btn-block btn-compact" id="settings-avatar-remove">Rimuovi</button>
                </div>
              </div>
            </div>
            <div class="avatar-helpers">
              <p id="avatar-message" class="helper-text"></p>
              <p class="muted small">Se rimuovi la foto, useremo automaticamente lâ€™avatar predefinito in base allo strumento, voce tipo di ensemble selezionato.</p>
            </div>
    </section>

    <section class="card" id="ensemble-location-card" style="display: none;">
      <h2>Sede ensemble</h2>
      <div class="stack">
        <div class="grid">
          <label class="field">
            <span class="field-label">CittÃ  / paese</span>
            <div class="autocomplete">
              <input type="text" id="set-location-city" autocomplete="off" placeholder="es. Milano, Brescia, Bagolino">
              <div id="set-location-suggestions" class="autocomplete-list" hidden></div>
            </div>
          </label>
          <label class="field">
            <span class="field-label">Via e numero civico</span>
            <div class="grid" style="grid-template-columns: 2fr 1fr; gap: 0.5rem;">
              <input type="text" id="set-location-street" placeholder="es. Via Verdi">
              <input type="text" id="set-location-streetNumber" placeholder="es. 12B">
            </div>
            <span class="field-hint muted xsmall">Visibile nel profilo pubblico.</span>
          </label>
        </div>
        <button type="button" id="btn-update-location" class="ghost ghost-primary">Aggiorna sede</button>
        <p id="location-message" class="helper-text"></p>
      </div>
    </section>

    <section class="card">
      <h2>Cambia email</h2>
      <div class="stack">
        <div class="grid">
          <label class="field">
            <span class="field-label">Nuova email</span>
            <input type="email" id="new-email" placeholder="nuova email">
          </label>
          <label class="field">
            <span class="field-label">Password</span>
            <input type="password" id="current-pwd-email" placeholder="Per confermare la modifica">
          </label>
        </div>
        <button type="button" id="btn-update-email" class="ghost ghost-primary">Aggiorna email</button>
        <p id="email-message" class="helper-text"></p>
      </div>
    </section>

    <section class="card">
      <h2>Cambia password</h2>
      <div class="stack">
        <div class="grid">
          <label class="field">
            <span class="field-label">Password attuale</span>
            <input type="password" id="current-pwd-pass" placeholder="Per confermare la modifica">
          </label>
          <label class="field">
            <span class="field-label">Nuova password</span>
            <input type="password" id="new-pass" placeholder="Minimo 6 caratteri">
          </label>
          <label class="field">
            <span class="field-label">Conferma nuova password</span>
            <input type="password" id="new-pass-confirm" placeholder="Ripeti la password">
          </label>
        </div>
        <button type="button" id="btn-update-pass" class="ghost ghost-primary">Aggiorna password</button>
        <p id="pass-message" class="helper-text"></p>
      </div>
    </section>

    <section class="card" id="travel-card">
      <h2>CittÃ  e disponibilitÃ </h2>
      <div class="stack">
        <div class="grid">
          <label class="field">
            <span class="field-label">CittÃ  / paese</span>
            <div class="autocomplete">
              <input type="text" id="set-city" autocomplete="off" placeholder="es. Milano, Torino, Brescia">
              <div id="set-city-suggestions" class="autocomplete-list" hidden></div>
            </div>
          </label>
          <label class="field">
            <span class="field-label">Distanza massima (km)</span>
            <input type="number" id="set-travel-km" min="0" step="1" placeholder="es. 25">
            <span class="field-hint muted xsmall">Km entro cui sei disposto a spostarti.</span>
          </label>
        </div>
        <button type="button" id="btn-update-travel" class="ghost ghost-primary">Aggiorna cittÃ  e distanza</button>
        <p id="travel-message" class="helper-text"></p>
      </div>
    </section>

    <section class="card">
      <h2>Bio e Curriculum</h2>
      <div class="stack">
        <div class="grid" id="name-fields">
          <label class="field">
            <span class="field-label">Nome</span>
            <input type="text" id="set-firstName" placeholder="es. Marco">
          </label>
          <label class="field">
            <span class="field-label">Cognome</span>
            <input type="text" id="set-lastName" placeholder="es. Bianchi">
          </label>
        </div>
        <div class="grid" id="instrument-block">
          <label class="field" id="settings-mainInstrument-field">
            <span class="field-label" id="settings-label-mainInstrument">Strumento principale</span>
            <div class="autocomplete with-clear">
              <input type="text" id="set-mainInstrument" placeholder="es. Chitarra" autocomplete="off">
              <button type="button" class="clear-input" id="clear-mainInstrument" aria-label="Pulisci strumento principale">âœ•</button>
              <div id="set-mainInstrument-suggestions" class="autocomplete-list" hidden></div>
            </div>
          </label>
          <label class="field" id="settings-instruments-field">
            <span class="field-label" id="settings-label-instruments">Altri strumenti suonati</span>
            <span class="field-hint muted xsmall">Separa gli strumenti con una virgola</span>
            <div class="autocomplete with-clear">
              <input type="text" id="set-instruments" placeholder="es. Chitarra, Pianoforte" autocomplete="off">
              <button type="button" class="clear-input" id="clear-instruments" aria-label="Pulisci strumenti">âœ•</button>
              <div id="set-instruments-suggestions" class="autocomplete-list" hidden></div>
            </div>
          </label>
        </div>
        <label class="field" id="settings-ensemble-members-field" style="display: none;">
          <span class="field-label">Componenti</span>
          <input type="number" id="set-ensemble-members" min="1" step="1" placeholder="es. 12">
        </label>
        <div class="grid" id="ensemble-info-fields" style="display: none;">
          <label class="field">
            <span class="field-label">Nome ensemble</span>
            <input type="text" id="set-ensemble-name" placeholder="es. Coro Arcobaleno">
          </label>
          <label class="field">
            <span class="field-label">Sito web (opzionale)</span>
            <input type="url" id="set-ensemble-website" placeholder="https://...">
          </label>
          <label class="field">
            <span class="field-label">Data di fondazione (opzionale)</span>
            <input type="date" id="set-foundedDate">
          </label>
        </div>
        <div class="grid" id="voice-settings-fields" style="display: none;">
          <label class="field">
            <span class="field-label">Registro vocale primario</span>
            <select id="set-voiceType" class="select-clean">
              <option value="">Seleziona</option>
              <option value="Soprano">Soprano</option>
              <option value="Mezzosoprano">Mezzosoprano</option>
              <option value="Contralto">Contralto</option>
              <option value="Tenore">Tenore</option>
              <option value="Baritono">Baritono</option>
              <option value="Basso">Basso</option>
            </select>
          </label>
          <label class="field">
            <span class="field-label">Registro vocale secondario (opzionale)</span>
            <select id="set-voiceType-secondary" class="select-clean">
              <option value="">Seleziona</option>
              <option value="Soprano">Soprano</option>
              <option value="Mezzosoprano">Mezzosoprano</option>
              <option value="Contralto">Contralto</option>
              <option value="Tenore">Tenore</option>
              <option value="Baritono">Baritono</option>
              <option value="Basso">Basso</option>
            </select>
          </label>
        </div>
        <div class="field" id="activity-level-field">
          <span class="field-label">Livello</span>
          <div class="option-chips">
            <label class="option-chip">
              <input type="radio" name="activity-level" value="professional">
              <span>Professionista</span>
            </label>
            <label class="option-chip">
              <input type="radio" name="activity-level" value="amateur">
              <span>Amatore</span>
            </label>
            <label class="option-chip">
              <input type="radio" name="activity-level" value="student">
              <span>Studente</span>
            </label>
            <label class="inline-check" id="stable-group-field" style="margin-left: 0.5rem;">
              <input type="checkbox" id="set-willing">
              <span class="field-label" style="font-weight: 600;">Disponibile a unirsi a un gruppo</span>
            </label>
          </div>
        </div>
        <div class="grid" id="personal-data-fields">
          <label class="field">
            <span class="field-label">Sesso (opzionale)</span>
            <select id="set-gender" class="select-clean">
              <option value="">Preferisco non rispondere</option>
              <option value="male">Uomo</option>
              <option value="female">Donna</option>
              <option value="non_binary">Non binario</option>
            </select>
            <label class="inline-check" style="margin-top: -0.3rem;">
              <input type="checkbox" id="set-gender-visible">
              <span class="muted small">Nascondi dal profilo pubblico</span>
            </label>
          </label>
          <label class="field">
            <span class="field-label">NazionalitÃ  (opzionale)</span>
            <div class="autocomplete">
              <input type="text" id="set-nationality" autocomplete="off" placeholder="Digita per cercare">
              <button type="button" class="combo-toggle" id="set-nationality-toggle" aria-label="Apri elenco">â–¼</button>
              <div id="set-nationality-suggestions" class="autocomplete-list" hidden></div>
            </div>
            <label class="inline-check" style="margin-top: -0.3rem;">
              <input type="checkbox" id="set-nationality-visible">
              <span class="muted small">Nascondi dal profilo pubblico</span>
            </label>
          </label>
          <label class="field" id="birthdate-field">
            <span class="field-label">Data di nascita (opzionale)</span>
            <input type="date" id="set-birthDate">
          </label>
        </div>
        <label class="field">
          <span class="field-label">Bio</span>
          <textarea id="set-bio" rows="3" placeholder="Breve descrizione"></textarea>
        </label>
        <label class="field">
          <span class="field-label">Curriculum</span>
          <textarea id="set-cv" rows="4" placeholder="Studi, esperienze, repertorio"></textarea>
        </label>
        <button type="button" id="btn-update-bio" class="ghost ghost-primary">Aggiorna Bio e Curriculum</button>
        <p id="bio-message" class="helper-text"></p>
      </div>
    </section>

    <section class="card">
      <h2 id="rates-title">Tariffe</h2>
      <div class="grid">
        <label class="field">
          <span class="field-label">Prova</span>
          <input type="number" id="set-rate-rehearsal" min="0" step="1" placeholder="â‚¬">
        </label>
        <label class="field">
          <span class="field-label">Concerto / messa</span>
          <input type="number" id="set-rate-concert" min="0" step="1" placeholder="â‚¬">
        </label>
        <label class="field">
          <span class="field-label">Servizio civile/religioso</span>
          <input type="number" id="set-rate-service" min="0" step="1" placeholder="â‚¬">
        </label>
        <label class="field" id="set-rate-trumpet-field" style="display: none;">
          <span class="field-label">Servizio civile/religioso</span>
          <span class="field-hint muted xsmall">(con squilli e silenzio)</span>
          <input type="number" id="set-rate-trumpet" min="0" step="1" placeholder="â‚¬">
        </label>
        <label class="field">
          <span class="field-label">Esibizione solista</span>
          <input type="number" id="set-rate-solo" min="0" step="1" placeholder="â‚¬">
        </label>
      </div>
      <button type="button" id="btn-update-rates" class="ghost ghost-primary btn-block">Aggiorna tariffe</button>
      <p id="rates-message" class="helper-text"></p>
    </section>

    <section class="card">
      <button type="button" id="btn-logout" class="danger btn-block">Logout</button>
    </section>
  </main>

  <script type="module" src="js/theme.js"></script>
  <script type="module" src="js/nav.js"></script>
  <script type="module" src="js/settings.js"></script>
  <nav class="floating-nav">
    <button type="button" id="theme-toggle" class="theme-toggle" aria-label="Cambia tema">ðŸŒ™</button>
    <a href="home.html">Home</a>
    <a href="ricerca.html">Ricerca</a>
    <a href="login.html" id="nav-auth">Login</a>
    <a href="settings.html" id="nav-settings" style="display: none;">Impostazioni</a>
    <a href="profile.html" id="nav-profile" style="display: none;">Profilo</a>
  </nav>
</body>
</html>
